<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Minecraft Music Studio</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Minecraft Music Studio</h1>
            <div class="header-controls">
                <button id="helpBtn" class="help-btn" title="Keyboard Shortcuts">‚ùì</button>
                <button id="themeToggle" class="theme-btn" title="Toggle Theme">üåô</button>
            </div>
        </div>
        
        <!-- Help Modal -->
        <div id="helpModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Keyboard Shortcuts</h2>
                    <button id="closeHelp" class="close-btn">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="shortcut-group">
                        <h3>Playback</h3>
                        <div class="shortcut-item">
                            <kbd>Space</kbd> <span>Play/Pause</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>R</kbd> <span>Stop</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>‚Üê</kbd> <span>Previous tick</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>‚Üí</kbd> <span>Next tick</span>
                        </div>
                    </div>
                    <div class="shortcut-group">
                        <h3>Editing</h3>
                        <div class="shortcut-item">
                            <kbd>Ctrl+Z</kbd> <span>Undo</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl+Y</kbd> <span>Redo</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Delete</kbd> <span>Clear selection</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl+A</kbd> <span>Select all</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl+C</kbd> <span>Copy selection</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl+V</kbd> <span>Paste selection</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Ctrl+Click</kbd> <span>Select notes</span>
                        </div>
                    </div>
                    <div class="shortcut-group">
                        <h3>Navigation</h3>
                        <div class="shortcut-item">
                            <kbd>Home</kbd> <span>Go to start</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>End</kbd> <span>Go to end</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>F</kbd> <span>Toggle full view</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Song Library Modal -->
        <div id="libraryModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Song Library</h2>
                    <button id="closeLibrary" class="close-btn">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="library-section">
                        <h3>Default Songs</h3>
                        <div class="song-grid" id="defaultSongs">
                            <!-- Default songs will be populated by JS -->
                        </div>
                    </div>
                    <div class="library-section">
                        <h3>Shared Songs</h3>
                        <div class="song-grid" id="sharedSongs">
                            <!-- Shared songs from URL will be populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Share Modal -->
        <div id="shareModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Share Song</h2>
                    <button id="closeShare" class="close-btn">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="share-section">
                        <h3>Share URL</h3>
                        <p>Copy this URL to share your song:</p>
                        <div class="url-container">
                            <input type="text" id="shareUrl" readonly>
                            <button id="copyUrlBtn" class="copy-btn">üìã Copy</button>
                        </div>
                    </div>
                    <div class="share-section">
                        <h3>Quick Share</h3>
                        <div class="share-buttons">
                            <button id="shareTwitterBtn" class="share-btn twitter">üê¶ Twitter</button>
                            <button id="shareDiscordBtn" class="share-btn discord">üí¨ Discord</button>
                            <button id="shareRedditBtn" class="share-btn reddit">ü§ñ Reddit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="audioNotice" class="audio-notice" style="display: none;">
            <p>Please start playing to enable audio playback</p>
        </div>
        
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-label">Position:</span>
                <span id="currentPosition">0</span>/<span id="totalLength">64</span>
            </div>
            <div class="status-item">
                <span class="status-label">Track:</span>
                <span id="currentTrack">1</span>
            </div>
            <div class="status-item">
                <span class="status-label">Notes:</span>
                <span id="noteCount">0</span>
            </div>
            <div class="status-item" id="selectionStatus" style="display: none;">
                <span class="status-label">Selection:</span>
                <span id="selectionInfo">Active</span>
            </div>
        </div>
        
        <div id="trackTabs" class="track-tabs">
            <!-- will later be populated -->
        </div>
        
        <div class="controls">
            <div class="song-info">
                <label for="songName">Song Name:</label>
                <input type="text" id="songName" value="My Song">
                <label for="songAuthor">Author:</label>
                <input type="text" id="songAuthor" value="Player">
                <label for="originalAuthor">Original Author:</label>
                <input type="text" id="originalAuthor" value="">
                <label for="songDescription">Description:</label>
                <textarea id="songDescription"></textarea>
                <button id="libraryBtn" class="song-info-btn" title="Song Library">üìö Song Library</button>
            </div>
            <div class="button-section">
                <div class="button-row">
                    <button id="playBtn">‚ñ∂Ô∏è Play</button>
                    <button id="pauseBtn" disabled>‚è∏Ô∏è Pause</button>
                </div>
                <div class="button-row">
                    <button id="stopBtn" disabled>‚èπÔ∏è Stop</button>
                    <button id="clearBtn">üóëÔ∏è Clear</button>
                </div>
                <div class="button-row">
                    <button id="undoBtn" disabled>‚Ü∂ Undo</button>
                    <button id="redoBtn" disabled>‚Ü∑ Redo</button>
                </div>
                <div class="button-row">
                    <button id="exportBtn">üíæ Export NBS</button>
                    <button id="importBtn">üìÅ Import NBS</button>
                </div>
                <div class="button-row">
                    <button id="copyBtn">üìã Copy</button>
                    <button id="pasteBtn" disabled>üìã Paste</button>
                </div>
                <div class="button-row">
                    <button id="shareBtn" class="share-btn">üì§ Share Song</button>
                </div>
            </div>
            <div class="settings-section">
                <div class="instrument-control">
                    <label>Instrument:</label>
                    <select id="instrumentSelector">
                        <!-- Instruments will be populated by JS -->
                    </select>
                </div>
                <div class="volume-control">
                    <label>Volume:</label>
                    <div class="slider-row">
                        <input type="range" id="volumeSlider" min="0" max="100" value="100">
                        <span id="volumeValue">100%</span>
                    </div>
                </div>
                <div class="tempo-control">
                    <label>Tempo:</label>
                    <div class="slider-row">
                        <input type="range" id="tempoSlider" min="20" max="600" value="120">
                        <input type="number" id="tempoInput" min="20" max="600" value="120" class="tempo-input">
                        <span id="tempoValue">BPM</span>
                    </div>
                </div>
                <div class="grid-control">
                    <label>Grid Size:</label>
                    <div class="slider-row">
                        <input type="range" id="gridSizeSlider" min="16" max="128" value="64" step="16">
                        <span id="gridSizeValue">64</span>
                    </div>
                </div>
                <button id="fullViewBtn" class="full-width-btn">üëÅÔ∏è Full View</button>
            </div>
        </div>

        <div class="piano-roll">
            <div class="piano-roll-inner">
                <div class="tick-labels"></div>
                <div class="piano-keys"></div>
                <div class="grid-container" id="gridContainer"></div>
                <div id="playhead" class="playhead" style="display: none;"></div>
                <div id="selectionBox" class="selection-box" style="display: none;"></div>
            </div>
        </div>

        <!-- Mobile-only song-info section -->
        <div class="song-info-mobile">
            <label for="songNameMobile">Song Name:</label>
            <input type="text" id="songNameMobile" value="My Song">
            <label for="songAuthorMobile">Author:</label>
            <input type="text" id="songAuthorMobile" value="Player">
            <label for="originalAuthorMobile">Original Author:</label>
            <input type="text" id="originalAuthorMobile" value="">
            <label for="songDescriptionMobile">Description:</label>
            <textarea id="songDescriptionMobile"></textarea>
        </div>
    </div>
    <script src="js/script.js"></script>
    <script src="js/NBS.js"></script>
</body>
</html>